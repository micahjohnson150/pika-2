/****************************************************************/
/*       PIKA - Phase field snow micro-structure model          */
/*                                                              */
/*          Prepared by Battelle Energy Alliance, LLC           */
/*            Under Contract No. DE-AC07-05ID14517              */
/*            With the U. S. Department of Energy               */
/*                                                              */
/*            See COPYRIGHT for full restrictions               */
/****************************************************************/

#include "IceProperties.h"

template<>
InputParameters validParams<IceProperties>()
{
  InputParameters params = validParams<Material>();
  params += validParams<PropertyUserObjectInterface>();
  params += IceProperties::objectParams();
  params.addCoupledVar("temperature", 273.15,  "The temperature variable to couple (default: 273.15)");
  return params;
}


IceProperties::IceProperties(const std::string & name, InputParameters parameters) :
    Material(name, parameters),
    PropertyUserObjectInterface(name, parameters),
    _temperature(coupledValue("temperature")),
    _k_i_input(getParam<Real>("conductivity_ice")),
    _c_i_input(getParam<Real>("heat_capacity_ice")),
    _rho_i(declareProperty<Real>("density_ice")),
    _k_i(declareProperty<Real>("conductivity_ice")),
    _c_i(declareProperty<Real>("heat_capacity_ice"))
{
}

void
IceProperties::computeQpProperties()
{
  _rho_i[_qp] = _property_uo.iceDensity(_temperature[_qp]);
  _k_i[_qp] = _k_i_input;
  _c_i[_qp] = _c_i_input;
}

InputParameters
IceProperties::objectParams()
{
  InputParameters params = emptyInputParameters();
  params.addParam<Real>("conductivity_ice", 2.29, "Thermal conductivity or air, k_i [ W/(m K)]");
  params.addParam<Real>("heat_capacity_ice", 1.8e6, "Heat capacity of air, C_i [J/(m^3 K)]");
  return params;
}
